admin-style.css -------->
/* General Admin Styles */
:root {
	--admin-bg: #f4f7fa;
	--sidebar-bg: #2c3e50;
	--sidebar-text: #ecf0f1;
	--sidebar-active: #3498db;
	--primary-btn: #3498db;
	--secondary-btn: #95a5a6;
	--danger-btn: #e74c3c;
	--form-border: #bdc3c7;
	--text-color: #34495e;
}

body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
		Arial, sans-serif;
	margin: 0;
	background-color: var(--admin-bg);
	color: var(--text-color);
}

/* Login Page */
.login-body {
	display: flex;
	justify-content: center;
	align-items: center;
	height: 100vh;
	background: var(--sidebar-bg);
}

.login-container {
	background: #fff;
	padding: 2rem 3rem;
	border-radius: 8px;
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
	width: 100%;
	max-width: 400px;
}

.login-container h2 {
	text-align: center;
	margin-bottom: 1.5rem;
}

/* Admin Wrapper */
.admin-wrapper {
	display: flex;
}

.sidebar {
	width: 250px;
	background: var(--sidebar-bg);
	color: var(--sidebar-text);
	min-height: 100vh;
	display: flex;
	flex-direction: column;
	flex-shrink: 0;
}

.sidebar h3 {
	padding: 1.5rem;
	text-align: center;
	background: rgba(0, 0, 0, 0.2);
	margin: 0;
}

.sidebar nav {
	flex-grow: 1;
}

.sidebar nav a {
	display: block;
	padding: 1rem 1.5rem;
	color: var(--sidebar-text);
	text-decoration: none;
	transition: background 0.3s;
	border-left: 4px solid transparent;
}

.sidebar nav a:hover {
	background: rgba(255, 255, 255, 0.05);
}

.sidebar nav a.active {
	background: var(--sidebar-active);
	border-left-color: var(--sidebar-text);
}

.btn-logout {
	background: var(--danger-btn);
	color: #fff;
	border: none;
	width: 100%;
	padding: 1rem;
	cursor: pointer;
	font-size: 1rem;
	text-align: center;
	text-decoration: none;
	display: block;
}

/* Main Content Area */
.main-content {
	flex-grow: 1;
	padding: 2rem;
	overflow-y: auto;
}

.content-panel {
	display: none;
}

.content-panel.active {
	display: block;
}

/* Forms */
form {
	background: #fff;
	padding: 2rem;
	border-radius: 8px;
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
}

.form-group {
	margin-bottom: 1.5rem;
}

.form-group label {
	display: block;
	margin-bottom: 0.5rem;
	font-weight: bold;
}

input[type="text"],
input[type="number"],
input[type="password"],
textarea,
select {
	width: 100%;
	padding: 0.8rem;
	border: 1px solid var(--form-border);
	border-radius: 4px;
	font-size: 1rem;
	box-sizing: border-box;
}

textarea {
	min-height: 100px;
	resize: vertical;
}

.form-actions {
	display: flex;
	gap: 1rem;
}

.btn-admin,
.btn-secondary,
.btn-danger,
.btn-edit {
	padding: 0.8rem 1.5rem;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 1rem;
	font-weight: bold;
	color: #fff;
	transition: opacity 0.3s;
}
.btn-admin:hover,
.btn-secondary:hover,
.btn-danger:hover,
.btn-edit:hover {
	opacity: 0.85;
}

.btn-admin {
	background-color: var(--primary-btn);
}
.btn-secondary {
	background-color: var(--secondary-btn);
}
.btn-danger {
	background-color: var(--danger-btn);
}
.btn-edit {
	background-color: #f39c12;
	color: #fff;
} /* Edit button color */

.error-message {
	color: var(--danger-btn);
	background-color: #fdd;
	border: 1px solid var(--danger-btn);
	border-radius: 4px;
	padding: 0.8rem;
	text-align: center;
	margin-bottom: 1.5rem;
}

hr {
	border: 0;
	height: 1px;
	background: #e0e0e0;
	margin: 2rem 0;
}

/* Data Lists */
.data-list-item {
	background: #fff;
	padding: 1rem 1.5rem;
	margin-bottom: 1rem;
	border-radius: 4px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.data-list-item p {
	margin: 0;
}

.data-list-item .actions {
	display: flex;
	gap: 0.5rem;
}

.gallery-admin-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
	gap: 1rem;
}

.gallery-admin-item {
	background: #fff;
	padding: 0.5rem;
	border-radius: 4px;
	text-align: center;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.gallery-admin-item img {
	max-width: 100%;
	height: 120px;
	object-fit: cover;
	border-radius: 4px;
	margin-bottom: 0.5rem;
}
.gallery-admin-item p {
	font-size: 0.9rem;
	margin: 0.5rem 0;
	word-wrap: break-word;
}
.gallery-admin-item button {
	margin-top: 0.5rem;
	width: 100%;
}

admin-script.js -------------->

document.addEventListener("DOMContentLoaded", () => {
	// Exit if not on the admin page
	if (!document.querySelector(".admin-wrapper")) return;

	// --- STATE ---
	const state = {
		packages: [],
		gallery: [],
		carousel: [],
	};

	// --- SELECTORS ---
	const navLinks = document.querySelectorAll(".nav-link");
	const contentPanels = document.querySelectorAll(".content-panel");

	// Package Selectors
	const packagesList = document.getElementById("packages-list");
	const packageForm = document.getElementById("package-form");
	const clearPackageFormBtn = document.getElementById("clear-package-form");

	// Gallery Selectors
	const galleryList = document.getElementById("gallery-list");
	const galleryForm = document.getElementById("gallery-upload-form");

	// Settings Selectors
	const whatsappForm = document.getElementById("whatsapp-form");
	const passwordForm = document.getElementById("password-form");

	// Testimonials Selectors
	const testimonialsList = document.getElementById("testimonials-list");
	const testimonialForm = document.getElementById("testimonial-form");
	const clearTestimonialFormBtn = document.getElementById("clear-testimonial-form");

	// --- API HELPER ---
	const apiCall = async (action, body = null) => {
		try {
			const options = {
				method: "POST",
				headers: { "Content-Type": "application/json" },
				body: body ? JSON.stringify(body) : null,
			};
			// Use GET for fetching data
			const fetchOptions =
				action === "admin_get_all" ? { method: "GET" } : options;
			const response = await fetch(`../api.php?action=${action}`, fetchOptions);
			if (!response.ok) {
				const errorData = await response.json();
				throw new Error(
					errorData.error || `HTTP error! status: ${response.status}`
				);
			}
			return await response.json();
		} catch (error) {
			console.error("API Call Failed:", error);
			alert(`An error occurred: ${error.message}`);
			return null;
		}
	};

	// --- RENDER FUNCTIONS ---
	const renderPackages = () => {
		if (!packagesList) return;
		packagesList.innerHTML =
			state.packages
				.map(
					(p) => `
          <div class="data-list-item">
              <p><strong>${p.name}</strong> - $${parseFloat(p.price).toFixed(
						2
					)}</p>
              <div class="actions">
                  <button class="btn-edit btn-edit-package" data-id="${
										p.id
									}">Edit</button>
                  <button class="btn-danger btn-delete-package" data-id="${
										p.id
									}">Delete</button>
              </div>
          </div>
      `
				)
				.join("") || "<p>No packages found. Add one using the form below.</p>";
	};

	const renderGallery = () => {
		if (!galleryList) return;
		galleryList.innerHTML =
			state.gallery
				.map(
					(g) => `
          <div class="gallery-admin-item">
              <img src="${g.image_url}" alt="${g.caption}" loading="lazy">
              <p><strong>${g.caption || "No caption"}</strong><br><small>(${
						g.category
					})</small></p>
              <button class="btn-danger btn-delete-gallery" data-id="${
								g.id
							}">Delete</button>
          </div>
      `
				)
				.join("") ||
			"<p>No gallery images found. Add one using the form above.</p>";
	};

	const renderSettings = () => {
		if (!whatsappForm) return;
		const whatsappNumber = state.settings.find(
			(s) => s.setting_key === "whatsapp_number"
		);
		if (whatsappNumber) {
			document.getElementById("whatsapp-number").value = whatsappNumber.setting_value;
		}
	};

	const renderTestimonials = () => {
		if (!testimonialsList) return;
		testimonialsList.innerHTML =
			state.testimonials
				.map(
					(t) => `
          <div class="data-list-item">
              <p><strong>${t.author}</strong></p>
              <div class="actions">
                  <button class="btn-edit btn-edit-testimonial" data-id="${t.id}">Edit</button>
                  <button class="btn-danger btn-delete-testimonial" data-id="${t.id}">Delete</button>
              </div>
          </div>
      `
				)
				.join("") || "<p>No testimonials found. Add one using the form below.</p>";
	};

	// --- EVENT HANDLERS ---
	const handlePackageFormSubmit = async (e) => {
		e.preventDefault();
		const id = document.getElementById("package-id").value;
		const payload = {
			id: id ? id : null,
			name: document.getElementById("package-name").value,
			price: document.getElementById("package-price").value,
			features: document.getElementById("package-features").value,
		};
		const result = await apiCall("save_package", payload);
		if (result && result.success) {
			clearPackageForm();
			await fetchData();
		}
	};

	const handleGalleryFormSubmit = async (e) => {
		e.preventDefault();
		const payload = {
			image_url: document.getElementById("gallery-image-url").value,
			caption: document.getElementById("gallery-caption").value,
			category: document.getElementById("gallery-category").value,
		};
		const result = await apiCall("save_gallery_image", payload);
		if (result && result.success) {
			galleryForm.reset();
			await fetchData();
		}
	};

	const handlePackagesListClick = async (e) => {
		const target = e.target;
		if (target.classList.contains("btn-delete-package")) {
			const id = target.dataset.id;
			if (confirm("Are you sure you want to delete this package?")) {
				const result = await apiCall("delete_package", { id });
				if (result) await fetchData();
			}
		}
		if (target.classList.contains("btn-edit-package")) {
			const id = target.dataset.id;
			const pkg = state.packages.find((p) => p.id == id);
			if (pkg) {
				document.getElementById("package-id").value = pkg.id;
				document.getElementById("package-name").value = pkg.name;
				document.getElementById("package-price").value = pkg.price;
				document.getElementById("package-features").value = pkg.features;
				packageForm.scrollIntoView({ behavior: "smooth" });
			}
		}
	};

	const handleGalleryListClick = async (e) => {
		if (e.target.classList.contains("btn-delete-gallery")) {
			const id = e.target.dataset.id;
			if (confirm("Are you sure you want to delete this image?")) {
				const result = await apiCall("delete_gallery_image", { id });
				if (result) await fetchData();
			}
		}
	};

	const clearPackageForm = () => packageForm.reset();

	const handleTestimonialFormSubmit = async (e) => {
		e.preventDefault();
		const id = document.getElementById("testimonial-id").value;
		const payload = {
			id: id ? id : null,
			author: document.getElementById("testimonial-author").value,
			quote: document.getElementById("testimonial-quote").value,
		};
		const result = await apiCall("save_testimonial", payload);
		if (result && result.success) {
			clearTestimonialForm();
			await fetchData();
		}
	};

	const handleTestimonialsListClick = async (e) => {
		const target = e.target;
		if (target.classList.contains("btn-delete-testimonial")) {
			const id = target.dataset.id;
			if (confirm("Are you sure you want to delete this testimonial?")) {
				const result = await apiCall("delete_testimonial", { id });
				if (result) await fetchData();
			}
		}
		if (target.classList.contains("btn-edit-testimonial")) {
			const id = target.dataset.id;
			const testimonial = state.testimonials.find((t) => t.id == id);
			if (testimonial) {
				document.getElementById("testimonial-id").value = testimonial.id;
				document.getElementById("testimonial-author").value = testimonial.author;
				document.getElementById("testimonial-quote").value = testimonial.quote;
				testimonialForm.scrollIntoView({ behavior: "smooth" });
			}
		}
	};

	const clearTestimonialForm = () => testimonialForm.reset();

	const handleWhatsappFormSubmit = async (e) => {
		e.preventDefault();
		const payload = {
			key: "whatsapp_number",
			value: document.getElementById("whatsapp-number").value,
		};
		const result = await apiCall("save_setting", payload);
		if (result && result.success) {
			alert("WhatsApp number updated successfully!");
			await fetchData();
		}
	};

	const handlePasswordFormSubmit = async (e) => {
		e.preventDefault();
		const currentPassword = document.getElementById("current-password").value;
		const newPassword = document.getElementById("new-password").value;
		const confirmPassword = document.getElementById("confirm-password").value;

		if (newPassword !== confirmPassword) {
			alert("New passwords do not match.");
			return;
		}

		const payload = { currentPassword, newPassword };
		const result = await apiCall("change_password", payload);
		if (result && result.success) {
			alert("Password changed successfully!");
			passwordForm.reset();
		}
	};

	// --- NAVIGATION ---
	const handleNavClick = (e) => {
		e.preventDefault();
		const targetId = e.target.getAttribute("href").substring(1);

		navLinks.forEach((l) => l.classList.remove("active"));
		e.target.classList.add("active");

		contentPanels.forEach((panel) => {
			panel.classList.toggle("active", panel.id === targetId);
		});
	};

	// --- INITIALIZATION ---
	const fetchData = async () => {
		const data = await apiCall("admin_get_all");
		if (data) {
			state.packages = data.packages || [];
			state.gallery = data.gallery || [];
			state.carousel = data.carousel || [];
			state.settings = data.settings || [];
			state.testimonials = data.testimonials || [];
			renderPackages();
			renderGallery();
			renderSettings();
			renderTestimonials();
			// renderCarousel(); // Future implementation
		}
	};

	// Bind Events
	navLinks.forEach((link) => link.addEventListener("click", handleNavClick));
	if (packageForm)
		packageForm.addEventListener("submit", handlePackageFormSubmit);
	if (galleryForm)
		galleryForm.addEventListener("submit", handleGalleryFormSubmit);
	if (packagesList)
		packagesList.addEventListener("click", handlePackagesListClick);
	if (galleryList)
		galleryList.addEventListener("click", handleGalleryListClick);
	if (clearPackageFormBtn)
		clearPackageFormBtn.addEventListener("click", clearPackageForm);
	if (whatsappForm)
		whatsappForm.addEventListener("submit", handleWhatsappFormSubmit);
	if (passwordForm)
		passwordForm.addEventListener("submit", handlePasswordFormSubmit);
	if (testimonialForm)
		testimonialForm.addEventListener("submit", handleTestimonialFormSubmit);
	if (testimonialsList)
		testimonialsList.addEventListener("click", handleTestimonialsListClick);
	if (clearTestimonialFormBtn)
		clearTestimonialFormBtn.addEventListener("click", clearTestimonialForm);

	// Initial data load
	fetchData();
});

auth-check.php ---------->

<?php
require_once '../config.php';

// This script checks if the user is logged in.
// It should be included at the very top of any admin-only page.
if (!isset($_SESSION['user_id'])) {
  // If not logged in, redirect to the login page
  header('Location: login.php');
  exit;
}

footer.php --------->

</div>
<script src="assets/js/admin-script.js"></script>
</body>

</html>

header.php ----------->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Ocean Top Waves</title>
  <link rel="stylesheet" href="assets/css/admin-style.css">
</head>

<body>
  <div class="admin-wrapper">

sidebar.php --------->
<aside class="sidebar">
  <h3>Admin Panel</h3>
  <nav>
    <a href="#dashboard" class="nav-link active">Dashboard</a>
    <a href="#carousel" class="nav-link">Carousel</a>
    <a href="#packages" class="nav-link">Surfing Packages</a>
    <a href="#gallery" class="nav-link">Gallery</a>
    <a href="#testimonials" class="nav-link">Testimonials</a>
    <a href="#settings" class="nav-link">Settings</a>
  </nav>
  <a href="logout.php" class="btn-logout">Logout</a>
</aside>

auth.php -------->
<?php
require_once '../config.php';

// Only process POST requests
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  $username = $_POST['username'] ?? '';
  $password = $_POST['password'] ?? '';

  // Basic validation
  if (empty($username) || empty($password)) {
    header('Location: login.php?error=Username and password are required.');
    exit;
  }

  try {
    $stmt = $pdo->prepare("SELECT * FROM admins WHERE username = ?");
    $stmt->execute([$username]);
    $user = $stmt->fetch();

    // Verify user exists and password is correct
    if ($user && password_verify($password, $user['password'])) {
      // Regenerate session ID for security
      session_regenerate_id(true);

      // Set session variables
      $_SESSION['user_id'] = $user['id'];
      $_SESSION['username'] = $user['username'];

      // Redirect to the admin dashboard
      header('Location: index.php');
      exit;
    } else {
      // Invalid credentials
      header('Location: login.php?error=Invalid username or password.');
      exit;
    }
  } catch (PDOException $e) {
    // Database error
    header('Location: login.php?error=A database error occurred.');
    exit;
  }
} else {
  // Redirect non-POST requests back to login
  header('Location: login.php');
  exit;
}

index.php ---------->
<?php
// This auth-check must be the very first thing on the page
require_once 'includes/auth-check.php';

// Now, include layout files
require_once 'includes/header.php';
require_once 'includes/sidebar.php';
?>

<main class="main-content">
  <!-- Dashboard Panel -->
  <section id="dashboard" class="content-panel active">
    <h1>Welcome, <?php echo htmlspecialchars($_SESSION['username']); ?>!</h1>
    <p>Select a section from the sidebar to manage your website's content.</p>
  </section>

  <!-- Carousel Management Panel (Future implementation) -->
  <section id="carousel" class="content-panel">
    <h2>Manage Carousel</h2>
    <p>This feature is under development. You can manage carousel slides directly in the database for now.</p>
  </section>

  <!-- Surfing Packages Panel -->
  <section id="packages" class="content-panel">
    <h2>Manage Surfing Packages</h2>
    <div id="packages-list">
      <p>Loading packages...</p>
    </div>
    <hr>
    <h3>Add / Edit Package</h3>
    <form id="package-form">
      <input type="hidden" id="package-id">
      <div class="form-group">
        <label for="package-name">Package Name</label>
        <input type="text" id="package-name" required>
      </div>
      <div class="form-group">
        <label for="package-price">Price</label>
        <input type="number" id="package-price" step="0.01" min="0" required>
      </div>
      <div class="form-group">
        <label for="package-features">Features (comma-separated, e.g., Feature 1, Feature 2)</label>
        <textarea id="package-features" required></textarea>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn-admin">Save Package</button>
        <button type="button" id="clear-package-form" class="btn-secondary">Clear Form</button>
      </div>
    </form>
  </section>

  <!-- Gallery Management Panel -->
  <section id="gallery" class="content-panel">
    <h2>Manage Gallery</h2>
    <form id="gallery-upload-form">
      <h3>Upload New Image</h3>
      <div class="form-group">
        <label for="gallery-image-url">Image URL</label>
        <input type="text" id="gallery-image-url" placeholder="https://images.unsplash.com/..." required>
      </div>
      <div class="form-group">
        <label for="gallery-caption">Caption (Optional)</label>
        <input type="text" id="gallery-caption">
      </div>
      <div class="form-group">
        <label for="gallery-category">Category</label>
        <select id="gallery-category" required>
          <option value="surfing">Surfing</option>
          <option value="tours">Tours</option>
          <option value="shop">Shop</option>
        </select>
      </div>
      <button type="submit" class="btn-admin">Add Image</button>
    </form>
    <hr>
    <h3>Existing Images</h3>
    <div id="gallery-list" class="gallery-admin-grid">
      <p>Loading gallery...</p>
    </div>
  </section>

  <!-- Settings Panel -->
  <section id="settings" class="content-panel">
    <h2>Settings</h2>
    <form id="whatsapp-form">
      <h3>WhatsApp Number</h3>
      <div class="form-group">
        <label for="whatsapp-number">Number</label>
        <input type="text" id="whatsapp-number" required>
      </div>
      <button type="submit" class="btn-admin">Save WhatsApp Number</button>
    </form>
    <hr>
    <form id="password-form">
      <h3>Change Password</h3>
      <div class="form-group">
        <label for="current-password">Current Password</label>
        <input type="password" id="current-password" required>
      </div>
      <div class="form-group">
        <label for="new-password">New Password</label>
        <input type="password" id="new-password" required>
      </div>
      <div class="form-group">
        <label for="confirm-password">Confirm New Password</label>
        <input type="password" id="confirm-password" required>
      </div>
      <button type="submit" class="btn-admin">Change Password</button>
    </form>
  </section>

  <!-- Testimonials Panel -->
  <section id="testimonials" class="content-panel">
    <h2>Manage Testimonials</h2>
    <div id="testimonials-list">
      <p>Loading testimonials...</p>
    </div>
    <hr>
    <h3>Add / Edit Testimonial</h3>
    <form id="testimonial-form">
      <input type="hidden" id="testimonial-id">
      <div class="form-group">
        <label for="testimonial-author">Author</label>
        <input type="text" id="testimonial-author" required>
      </div>
      <div class="form-group">
        <label for="testimonial-quote">Quote</label>
        <textarea id="testimonial-quote" required></textarea>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn-admin">Save Testimonial</button>
        <button type="button" id="clear-testimonial-form" class="btn-secondary">Clear Form</button>
      </div>
    </form>
  </section>
</main>

<?php require_once 'includes/footer.php'; ?>

login.php -------->
<?php
require_once '../config.php';
// If user is already logged in, redirect to the dashboard
if (isset($_SESSION['user_id'])) {
  header('Location: index.php');
  exit;
}
?>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Login - Ocean Top Waves</title>
  <link rel="stylesheet" href="assets/css/admin-style.css">
</head>

<body class="login-body">
  <div class="login-container">
    <h2>Admin Login</h2>
    <?php if (isset($_GET['error'])): ?>
      <p class="error-message"><?php echo htmlspecialchars($_GET['error']); ?></p>
    <?php endif; ?>
    <form action="auth.php" method="POST">
      <div class="form-group">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" required>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" required>
      </div>
      <button type="submit" class="btn-admin">Login</button>
    </form>
  </div>
</body>

</html>

logout.php --------->
<?php
require_once '../config.php';

// Unset all of the session variables
$_SESSION = [];

// Destroy the session
session_destroy();

// Redirect to login page
header('Location: login.php');
exit;
